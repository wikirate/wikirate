// topic_selector.js.coffee
(function(){var t,e,n,r,i,o,c,a;r="bg-topic",t=".topic-tree-input",$.extend(decko.editors.content,((e={})[""+t]=function(){return decko.pointerContent(this.find(".card-title."+r).map(function(){return a(this)}))},e)),$.extend(decko.editors.init,((n={})[""+t]=function(){return o(this,this.contentField().val().split("\n"))},n)),$(function(){return $("body").on("click",t+" .tree-leaf",function(){return c($(this))})}),c=function(t){return t.find("> .card-title").toggleClass(r),i(t)},i=function(t){var e,n;if((n=t.closest(".tree-item")).length)return e=n.find(".tree-body ."+r).length>0,n.find("> .tree-header .card-title").toggleClass(r,e),i(n.parent())},a=function(t){return $(t).closest("[data-treeval]").data("treeval")},o=function(t,e){var n,r,i,o,a;for(o=[],n=0,r=e.length;n<r;n++)a=e[n],i=t.find("[data-treeval='"+a+"']"),c(i,!0),o.push(i.find("> .tree-header .tree-button").trigger("click"));return o}}).call(this);