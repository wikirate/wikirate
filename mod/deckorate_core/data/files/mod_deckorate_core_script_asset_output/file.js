// script_metrics.js.coffee
(function(){decko.slotReady(function(t){return t.find('[data-tooltip="true"]').tooltip()}),$(window).ready(function(){return $(".new-metric").on("click",".metric-type-list .box",function(t){var e;return e={card:{fields:{":metric_type":$(this).data("cardLinkName")}}},window.location=decko.path("new/Metric?"+$.param(e)),t.stopImmediatePropagation(),t.preventDefault()})})}).call(this);
// script_metric_properties.js.coffee
(function(){var e,t,n,r,i,o,c,u,a,s,f;e=".metric-properties",t=".RIGHT-hybrid input[type=checkbox]",n=".RIGHT-value_type input[type=radio]",decko.slotReady(function(r){var o;return r.hasClass("TYPE-metric")&&(r.hasClass("new-view")||r.hasClass("edit-view"))&&(f(r,r.find(t).prop("checked")),s(r,r.find(n+":checked").val())),(o=r.find(e)).length>0&&(f(o,c(o)),s(o,o.find(".RIGHT-value_type .item-name").text())),r.on("change",t,function(){return f(i(this),$(this).prop("checked"))}),r.on("change",n,function(){return s(i(this),$(this).val())})}),c=function(e){return"yes"===$.trim(e.find(".RIGHT-hybrid.content-view").text())},f=function(e,t){if(e.find(".RIGHT-hybrid")[0])return $.each(["research_policy","report_type","about","methodology","steward"],function(n,r){return u(e,r).toggle(t)})},i=function(e){return $(e).closest(".TYPE-metric")},o=function(e){switch(e){case"Number":case"Money":return["unit","range"];case"Category":case"Multi-Category":return["value_option"];default:return[]}},s=function(e,t){return r(e),a(e,t)},r=function(e){return["unit","range","value_option"].forEach(function(t){return u(e,t).hide()})},a=function(e,t){return o(t).forEach(function(t){return u(e,t).show()})},u=function(t,n){var r;return(r=t.find(".RIGHT-"+n)).closest(e)[0]?r.closest(".labeled-view"):r}}).call(this);
// script_metric_chart.js.coffee
(function(){var t,e,n,i,r,s;window.deckorate={},decko.slotReady(function(t){var e,n,r,s,d;for(s=[],e=0,n=(r=t.find(".vis._load-vis")).length;e<n;e++)d=r[e],s.push(i($(d)));return s}),i=function(t){return t.removeClass("_load-vis"),$.ajax({url:t.data("url"),visID:t.attr("id"),dataType:"json",type:"GET",success:function(t){return e(t,this.visID)}})},e=function(t,e){return n(t,$("#"+e))},t=function(t,e){return t.addEventListener("click",function(t,n){var i;if(e.closest("._filtered-content").exists())return(i=n.datum).filter?s(e,i.filter):i.details?r(i.details):void 0})},n=function(e,n){return vegaEmbed(n[0],e).then(function(e){return t(e.view,n)})},s=function(t,e){return new decko.filter(t.closest("._filtered-content").find("._filter-widget")).addRestrictions(e)},r=function(t){return $('[data-details-mark="'+t+'"]').trigger("click")},$(document).ready(function(){return $("body").on("click","._filter-bindings",function(){var t,e;return t="with-bindings",(e=$(this).closest(".filtered-results").find(".vis")).hasClass(t)?e.removeClass(t):e.addClass(t)})})}).call(this);