// script_metrics.js.coffee
(function(){decko.slotReady(function(t){return t.find('[data-tooltip="true"]').tooltip()}),$(window).ready(function(){return $(".new-metric").on("click",".metric-type-list .box",function(t){var e;return e={card:{fields:{":metric_type":$(this).data("cardLinkName")}}},window.location=decko.path("new/Metric?"+$.param(e)),t.stopImmediatePropagation(),t.preventDefault()})})}).call(this);
// script_metric_properties.js.coffee
(function(){var e,t,n,r,i,o,c,u,a,s,f;e=".metric-properties",t=".RIGHT-hybrid input[type=checkbox]",n=".RIGHT-value_type input[type=radio]",decko.slotReady(function(r){var o;return r.hasClass("TYPE-metric")&&(r.hasClass("new-view")||r.hasClass("edit-view"))&&(f(r,r.find(t).prop("checked")),s(r,r.find(n+":checked").val())),(o=r.find(e)).length>0&&(f(o,c(o)),s(o,o.find(".RIGHT-value_type .item-name").text())),r.on("change",t,function(){return f(i(this),$(this).prop("checked"))}),r.on("change",n,function(){return s(i(this),$(this).val())})}),c=function(e){return"yes"===$.trim(e.find(".RIGHT-hybrid.content-view").text())},f=function(e,t){if(e.find(".RIGHT-hybrid")[0])return $.each(["research_policy","report_type","about","methodology","steward"],function(n,r){return u(e,r).toggle(t)})},i=function(e){return $(e).closest(".TYPE-metric")},o=function(e){switch(e){case"Number":case"Money":return["unit","range"];case"Category":case"Multi-Category":return["value_option"];default:return[]}},s=function(e,t){return r(e),a(e,t)},r=function(e){return["unit","range","value_option"].forEach(function(t){return u(e,t).hide()})},a=function(e,t){return o(t).forEach(function(t){return u(e,t).show()})},u=function(t,n){var r;return(r=t.find(".RIGHT-"+n)).closest(e)[0]?r.closest(".labeled-view"):r}}).call(this);
// script_metric_chart.js.coffee
(function(){var t,n,e,i,r,s;window.deckorate={},decko.slotReady(function(t){var n,e,r,s,o;for(s=[],n=0,e=(r=t.find(".vis._load-vis")).length;n<e;n++)o=r[n],s.push(i($(o)));return s}),i=function(t){return t.removeClass("_load-vis"),$.ajax({url:t.data("url"),visID:t.attr("id"),dataType:"json",type:"GET",success:function(t){return n(t,this.visID)}})},n=function(t,n){return e(t,$("#"+n))},t=function(t,n){return t.addEventListener("click",function(t,e){var i;if(n.closest("._filtered-content").exists())return(i=e.datum).filter?s(n,i.filter):i.details?r(i.details):void 0})},e=function(n,e){return vegaEmbed(e[0],n).then(function(n){return t(n.view,e)})},s=function(t,n){return new decko.filter(t.closest("._filtered-content").find("._compact-filter")).addRestrictions(n)},r=function(t){return $('[data-details-mark="'+t+'"]').trigger("click")},$(document).ready(function(){return $("body").on("click","._filter-bindings",function(){var t,n;return t="with-bindings",(n=$(this).closest("._filtered-content").find(".vis")).hasClass(t)?n.removeClass(t):n.addClass(t)})})}).call(this);