// script_metrics.js.coffee
(function(){decko.slotReady(function(t){return t.find('[data-tooltip="true"]').tooltip()}),$(window).ready(function(){return $(".new-metric").on("click",".metric-type-list .box",function(t){var e;return e={card:{subfields:{":metric_type":$(this).data("cardLinkName")}}},window.location=decko.path("new/Metric?"+$.param(e)),t.stopImmediatePropagation(),t.preventDefault()})})}).call(this);
// script_metric_properties.js.coffee
(function(){var r,n,i,o,c,u,a,s,f,h,l;r=".metric-properties",n=".RIGHT-hybrid input[type=checkbox]",i=".RIGHT-value_type input[type=radio]",decko.slotReady(function(e){var t;return e.hasClass("TYPE-metric")&&(e.hasClass("new-view")||e.hasClass("edit-view"))&&(l(e,e.find(n).prop("checked")),h(e,e.find(i+":checked").val())),0<(t=e.find(r)).length&&(l(t,a(t)),h(t,t.find(".RIGHT-value_type .item-name").text())),e.on("change",n,function(){return l(c(this),$(this).prop("checked"))}),e.on("change",i,function(){return h(c(this),$(this).val())})}),a=function(e){return"yes"===$.trim(e.find(".RIGHT-hybrid.content-view").text())},l=function(n,r){if(n.find(".RIGHT-hybrid")[0])return $.each(["research_policy","report_type","about","methodology","steward"],function(e,t){return s(n,t).toggle(r)})},c=function(e){return $(e).closest(".TYPE-metric")},u=function(e){switch(e){case"Number":case"Money":return["unit","range"];case"Category":case"Multi-Category":return["value_option"];default:return[]}},h=function(e,t){return o(e),f(e,t)},o=function(t){return["unit","range","value_option"].forEach(function(e){return s(t,e).hide()})},f=function(t,e){return u(e).forEach(function(e){return s(t,e).show()})},s=function(e,t){var n;return(n=e.find(".RIGHT-"+t)).closest(r)[0]?n.closest(".labeled-view"):n}}).call(this);
// script_metric_chart.js.coffee
(function(){var n,e,i,d,r,s;window.deckorate={},decko.slotReady(function(t){var e,n,i,r,s;for(r=[],e=0,n=(i=t.find(".vis._load-vis")).length;e<n;e++)s=i[e],r.push(d($(s)));return r}),d=function(t){return t.removeClass("_load-vis"),$.ajax({url:t.data("url"),visID:t.attr("id"),dataType:"json",type:"GET",success:function(t){return e(t,this.visID)}})},e=function(t,e){return i(t,$("#"+e))},n=function(t,i){return t.addEventListener("click",function(t,e){var n;if(i.closest("._filtered-content").exists())return(n=e.datum).filter?s(i,n.filter):n.details?r(n.details):void 0})},i=function(t,e){return vegaEmbed(e[0],t).then(function(t){return n(t.view,e)})},s=function(t,e){return new decko.filter(t.closest("._filtered-content").find("._filter-widget")).addRestrictions(e)},r=function(t){return $('[data-details-mark="'+t+'"]').trigger("click")},$(document).ready(function(){return $("body").on("click","._filter-bindings",function(){var t,e;return t="with-bindings",(e=$(this).closest(".filtered-results").find(".vis")).hasClass(t)?e.removeClass(t):e.addClass(t)})})}).call(this);