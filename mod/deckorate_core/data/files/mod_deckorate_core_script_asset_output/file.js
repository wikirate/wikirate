// customize_fields.js.coffee
(function(){var e,t,i,n,r,c,o,d,l,s,u;$(function(){return deckorate.customFields={headquarters:{title:"Company Headquarters",selector:".TYPE-company.thumbnail .RIGHT-headquarter.content-view"},identifiers:{title:"Company Identifiers",selector:".TYPE-company.thumbnail .thumbnail-subtitle"},metric_type:{title:"Metric Type",selector:".TYPE-metric.thumbnail .thumbnail-title-right"},metric_designer:{title:"Metric Designer",selector:".TYPE-metric.thumbnail .thumbnail-subtitle"},contributor:{title:"Contributor",selector:".bar-middle .credit"}},deckorate.updateCustomFieldOptions=function(e){var i,r,o,d,l;for(o in e.html(""),l=[],d=deckorate.customFields)r=d[o],c(r.selector)[0]?(i=n(o),l.push(t(e,o,r,i))):l.push(void 0);return l},$("body").on("change","._custom-field-checkboxes input",function(){var e;return e=$(this),l(e.data("fieldSelector"),e.is(":checked")),d(),s(),u()}),$("body").on("change","input#_all-custom-fields",function(){var e;return(e=r()).prop("checked",$(this).is(":checked")),e.trigger("change")})}),decko.slot.ready(function(e){var t,i,r,c;if((i=e.find("._custom-field-checkboxes"))[0]&&(deckorate.updateCustomFieldOptions(i),d()),e.find(".record-result-items")[0])for(r in deckorate.updateCustomFieldOptions($("._custom-field-checkboxes")),c=deckorate.customFields)t=c[r],l(t.selector,n(r));if(e.find("._ident-field")[0])return s()}),s=function(){return $("._ident-field:not(:contains(','))").append($("<span class='ident-comma'>, </span>")),$(".ident-comma").show(),$(".thumbnail-subtitle").find(".ident-comma:visible:last").hide()},u=function(){var e,t;return t=o(),e=r().filter(":not(:checked)").map(function(){return $(this).data("fieldKey")}),t.items||(t.items={}),t.items.hide=e.get(),decko.filter.updateUrl($(".record-result-items"))},l=function(e,t){return c(e).toggle(t)},t=function(t,i,n,r){var c,o,d,l;return o="custom-field-"+i,(c=(d=$("._custom-field-template .custom-field").clone()).find("input")).attr("id",o),c.data("fieldSelector",n.selector),c.data("fieldKey",i),c.prop("checked",r),(l=d.find("label")).html(n.title),l.attr("for",o),"identifiers"===i&&e(d),t.append(d)},e=function(e){var r,c,o,d;for(o in c=$('<div class="company-id-input-list ps-4 py-2">'),d=i())r=d[o],t(c,"ID-"+r,{title:o+" ("+r+")",selector:"._ident-field-"+r},n("ID-"+r));return e.append(c)},i=function(){var e;return e={},c("._ident-field").each(function(){var t,i;return t=$(this).data("ci"),e[i=t[0]]||(e[i]=t[1])}),e},n=function(e){var t,i;return!(i=o().items)||!(t=i.hide)||!t.includes(e)},o=function(){var e;return(e=$(".record-result-items").slot()).data("slot")||e.data("slot",{}),e.data("slot")},c=function(e){return $(".record-result-items").find(e)},r=function(){return $("._custom-field-checkboxes ._custom-field input")},d=function(){var e,t,i,n,c;if(c=r(),t=$("input#_all-custom-fields"),e=(i=c.filter(":checked").length)===c.length,n=0===i||e,t.prop("indeterminate",!n),n)return t.prop("checked",e)}}).call(this);
// deckorate.js.coffee
(function(){window.deckorate={},$(window).ready(function(){return $(".new-metric").on("click",".metric-type-list .box",function(t){var e;return e={card:{fields:{":metric_type":$(this).data("cardLinkName")}}},window.location=decko.path("new/Metric?"+$.param(e)),t.stopImmediatePropagation(),t.preventDefault()}),$("body").on("click","._filter-year-field input",function(){var t,e;return e=(t=$(this)).parent().siblings(),"latest"!==t.val()?e.find("input[value='latest']").prop("checked",!1):t.is(":checked")?e.find("input").prop("checked",!1):void 0}),$("body").on("click",".tree-button ._record-group-modal-link .metric-value",function(t){return $(this).closest(".bar").find("._modal-page-link").trigger("click"),t.stopPropagation(),t.preventDefault()})})}).call(this);
// filter_enhancements.js.coffee
(function(){$(function(){return $("body").on("click","._custom-item-view-radios input",function(){var t,e,i;return e=$(this),(i=(t=$("._customize_filtered")).slot().data("slot")).items||(i.items={}),i.items.view=e.val(),decko.filter.refilter(t)}),$("body").on("click","._sort-buttons a",function(t){var e,i;return e=$(this),(i=decko.filter.query(e)).sort_by=e.data("sortBy"),i.sort_dir=e.data("sortDir"),decko.filter.refilter(e),t.preventDefault()})})}).call(this);
// metric_properties.js.coffee
(function(){var e,t,n,r,i,o,c,u,a,s,f;e=".metric-properties",t=".RIGHT-hybrid input[type=checkbox]",n=".RIGHT-value_type input[type=radio]",decko.slot.ready(function(r){var o;return r.hasClass("TYPE-metric")&&(r.hasClass("new-view")||r.hasClass("edit-view"))&&(f(r,r.find(t).prop("checked")),s(r,r.find(n+":checked").val())),(o=r.find(e)).length>0&&(f(o,c(o)),s(o,o.find(".RIGHT-value_type .item-name").text())),r.on("change",t,function(){return f(i(this),$(this).prop("checked"))}),r.on("change",n,function(){return s(i(this),$(this).val())})}),c=function(e){return"yes"===$.trim(e.find(".RIGHT-hybrid.content-view").text())},f=function(e,t){if(e.find(".RIGHT-hybrid")[0])return $.each(["research_policy","report_type","about","methodology","steward"],function(n,r){return u(e,r).toggle(t)})},i=function(e){return $(e).closest(".TYPE-metric")},o=function(e){switch(e){case"Number":case"Money":return["unit","range"];case"Category":case"Multi-Category":return["value_option"];default:return[]}},s=function(e,t){return r(e),a(e,t)},r=function(e){return["unit","range","value_option"].forEach(function(t){return u(e,t).hide()})},a=function(e,t){return o(t).forEach(function(t){return u(e,t).show()})},u=function(t,n){var r;return(r=t.find(".RIGHT-"+n)).closest(e)[0]?r.closest(".labeled-view"):r}}).call(this);