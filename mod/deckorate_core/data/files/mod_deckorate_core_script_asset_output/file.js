// customize_fields.js.coffee
(function(){var e,t,i,r,n,c,o,u,l,s;$(function(){return deckorate.customFields={headquarters:{title:"Company Headquarters",selector:".TYPE-company.thumbnail .RIGHT-headquarter.content-view"},identifiers:{title:"Company Identifiers",selector:".TYPE-company.thumbnail .thumbnail-subtitle"},metric_type:{title:"Metric Type",selector:".TYPE-metric.thumbnail .thumbnail-title-right"},metric_designer:{title:"Metric Designer",selector:".TYPE-metric.thumbnail .thumbnail-subtitle"},contributor:{title:"Contributor",selector:".bar-middle .credit"}},deckorate.updateCustomFieldOptions=function(e){var i,r,c,u,l;for(c in e.html(""),l=[],u=deckorate.customFields)r=u[c],o(r.selector)[0]?(i=n(c),l.push(t(e,c,r,i))):l.push(void 0);return l},$("body").on("change","._custom-field-checkboxes input",function(){var e;return e=$(this),l(e.data("fieldSelector"),e.is(":checked")),u(),s()}),$("body").on("change","input#_all-custom-fields",function(){var e;return(e=c()).prop("checked",$(this).is(":checked")),e.trigger("change")})}),decko.slot.ready(function(e){var t,i,r,c,o;if((i=e.find("._custom-field-checkboxes"))[0]&&(deckorate.updateCustomFieldOptions(i),u()),e.find(".answer-result-items")[0]){for(r in deckorate.updateCustomFieldOptions($("._custom-field-checkboxes")),o=[],c=deckorate.customFields)t=c[r],o.push(l(t.selector,n(r)));return o}}),s=function(){var e,t;return t=i(),e=c().filter(":not(:checked)").map(function(){return $(this).data("fieldKey")}),t.items||(t.items={}),t.items.hide=e.get(),decko.filter.updateUrl($(".answer-result-items"))},l=function(e,t){return o(e).toggle(t)},t=function(t,i,r,n){var c,o,u,l;return o="custom-field-"+i,(c=(u=$("._custom-field-template .custom-field").clone()).find("input")).attr("id",o),c.data("fieldSelector",r.selector),c.data("fieldKey",i),c.prop("checked",n),(l=u.find("label")).html(r.title),l.attr("for",o),"identifiers"===i&&e(u),t.append(u)},e=function(e){var i,c,o,u;for(o in c=$('<div class="company-id-input-list ps-4 py-2">'),u=r())i=u[o],t(c,"ID-"+i,{title:o+" ("+i+")",selector:"._ident-field-"+i},n("ID-"+i));return e.append(c)},r=function(){var e;return e={},o("._ident-field").each(function(){var t,i;return t=$(this).data("ci"),e[i=t[0]]||(e[i]=t[1])}),e},n=function(e){var t,r;return!(r=i().items)||!(t=r.hide)||!t.includes(e)},i=function(){var e;return(e=$(".answer-result-items").slot()).data("slot")||e.data("slot",{}),e.data("slot")},o=function(e){return $(".answer-result-items").find(e)},c=function(){return $("._custom-field-checkboxes ._custom-field input")},u=function(){var e,t,i,r,n;if(n=c(),t=$("input#_all-custom-fields"),e=(i=n.filter(":checked").length)===n.length,r=0===i||e,t.prop("indeterminate",!r),r)return t.prop("checked",e)}}).call(this);
// deckorate.js.coffee
(function(){window.deckorate={},$(window).ready(function(){return $(".new-metric").on("click",".metric-type-list .box",function(e){var t;return t={card:{fields:{":metric_type":$(this).data("cardLinkName")}}},window.location=decko.path("new/Metric?"+$.param(t)),e.stopImmediatePropagation(),e.preventDefault()}),$("body").on("click","._filter-year-field input",function(){var e,t;return t=(e=$(this)).parent().siblings(),"latest"!==e.val()?t.find("input[value='latest']").prop("checked",!1):e.is(":checked")?t.find("input").prop("checked",!1):void 0})})}).call(this);
// filter_enhancements.js.coffee
(function(){$(function(){return $("body").on("click","._custom-item-view-radios input",function(){var t,e,i;return e=$(this),(i=(t=$("._customize_filtered")).slot().data("slot")).items||(i.items={}),i.items.view=e.val(),decko.filter.refilter(t)}),$("body").on("click","._sort-buttons a",function(t){var e,i;return e=$(this),(i=decko.filter.query(e)).sort_by=e.data("sortBy"),i.sort_dir=e.data("sortDir"),decko.filter.refilter(e),t.preventDefault()})})}).call(this);
// metric_properties.js.coffee
(function(){var e,t,n,r,i,o,c,u,a,s,f;e=".metric-properties",t=".RIGHT-hybrid input[type=checkbox]",n=".RIGHT-value_type input[type=radio]",decko.slot.ready(function(r){var o;return r.hasClass("TYPE-metric")&&(r.hasClass("new-view")||r.hasClass("edit-view"))&&(f(r,r.find(t).prop("checked")),s(r,r.find(n+":checked").val())),(o=r.find(e)).length>0&&(f(o,c(o)),s(o,o.find(".RIGHT-value_type .item-name").text())),r.on("change",t,function(){return f(i(this),$(this).prop("checked"))}),r.on("change",n,function(){return s(i(this),$(this).val())})}),c=function(e){return"yes"===$.trim(e.find(".RIGHT-hybrid.content-view").text())},f=function(e,t){if(e.find(".RIGHT-hybrid")[0])return $.each(["research_policy","report_type","about","methodology","steward"],function(n,r){return u(e,r).toggle(t)})},i=function(e){return $(e).closest(".TYPE-metric")},o=function(e){switch(e){case"Number":case"Money":return["unit","range"];case"Category":case"Multi-Category":return["value_option"];default:return[]}},s=function(e,t){return r(e),a(e,t)},r=function(e){return["unit","range","value_option"].forEach(function(t){return u(e,t).hide()})},a=function(e,t){return o(t).forEach(function(t){return u(e,t).show()})},u=function(t,n){var r;return(r=t.find(".RIGHT-"+n)).closest(e)[0]?r.closest(".labeled-view"):r}}).call(this);